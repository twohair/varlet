import{M as _}from"./index.44744767.js";import{R as ee}from"./index.c3ac679f.js";import{I as ae}from"./index.07bfe65b.js";import{C as le}from"./index.be0a5978.js";import{I as ie}from"./index.f3db583b.js";import{d as se,r as k,b as $,y as L,e as N,f as ne,o as d,c as f,w as I,p as v,G as O,i as y,V as Q,a as U,t as b,F as R,k as j,m as E,j as F,l as oe,h as H}from"./vendor.49f89f0d.js";import{t as u,c as te,i as q}from"./components.5cba9644.js";import{p as ue}from"./en-US.628e0d34.js";import{_ as re}from"./elevation.c9ea9f5a.js";const de={current:{type:[Number,String]},size:{type:[Number,String],default:10},total:{type:[Number,String],default:0},maxPagerCount:{type:Number,default:3},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!1},sizeOption:{type:Array,default:()=>[10,20,50,100]},showTotal:{type:Function},onChange:{type:Function},"onUpdate:current":{type:Function},"onUpdate:size":{type:Function}};const{n:ve,classes:me}=te("pagination"),pe=se({name:"VarPagination",components:{VarMenu:_,VarIcon:ae,VarCell:le,VarInput:ie},directives:{Ripple:ee},props:de,setup(e){const i=k(!1),w=k(""),h=k("1"),z=k(!1),P=k(!1),s=k(u(e.current)||1),m=k(u(e.size)||10),c=k([]),C=$(()=>Math.ceil(e.maxPagerCount/2)),o=$(()=>Math.ceil(u(e.total)/u(m.value))),l=$(()=>{const a=m.value*(s.value-1)+1,t=Math.min(m.value*s.value,u(e.total));return[a,t]}),g=$(()=>e.showTotal?e.showTotal(u(e.total),l.value):""),B=(a,t)=>q(a)?!1:t===1?z.value:P.value,A=(a,t)=>q(a)?"basic":t===1?"head":"tail",G=(a,t)=>{a===s.value||e.disabled||(q(a)?s.value=a:a==="prev"?s.value>1&&(s.value-=1):a==="next"?s.value<o.value&&(s.value+=1):a==="..."&&(t===1?s.value=Math.max(s.value-e.maxPagerCount,1):s.value=Math.min(s.value+e.maxPagerCount,o.value)))},W=()=>{e.disabled||(i.value=!0)},X=a=>{m.value=a,i.value=!1},D=a=>/^[1-9][0-9]*$/.test(a),Y=(a,t,M)=>{if(M.target.blur(),D(t)){let V=u(t);V>o.value&&(V=o.value,h.value=`${V}`),V!==s.value&&(s.value=V)}a==="quick"&&(w.value=""),a==="simple"&&!D(t)&&(h.value=`${s.value}`)};return L([()=>e.current,()=>e.size],([a,t])=>{s.value=u(a)||1,m.value=u(t||10)}),L([s,m],([a,t],[M,V])=>{var J,K;if(a>o.value){s.value=o.value;return}let r=[];const{maxPagerCount:p,total:Z,onChange:S}=e,x=Math.ceil(u(Z)/u(V)),T=o.value-(p-C.value)-1;if(h.value=`${a}`,o.value-2>p){if(M===void 0||o.value!==x)for(let n=2;n<p+2;n++)r.push(n);if(a<=p&&a<T){r=[];for(let n=1;n<p+1;n++)r.push(n+1);z.value=!0,P.value=!1}if(a>p&&a<T){r=[];for(let n=1;n<p+1;n++)r.push(a+n-C.value);z.value=a===2&&p===1,P.value=!1}if(a>=T){r=[];for(let n=1;n<p+1;n++)r.push(o.value-(p-n)-1);z.value=!1,P.value=!0}r=[1,"...",...r,"...",o.value]}else for(let n=1;n<=o.value;n++)r.push(n);c.value=r,M!==void 0&&(S==null||S(a,t)),(J=e["onUpdate:current"])==null||J.call(e,a),(K=e["onUpdate:size"])==null||K.call(e,t)},{immediate:!0}),{n:ve,classes:me,pack:ue,current:s,menuVisible:i,size:m,pageCount:o,pageList:c,inputValue:w,simpleValue:h,totalText:g,getMode:A,isHideEllipsis:B,clickItem:G,showMenu:W,clickSize:X,setPage:Y,toNumber:u}}}),fe=["item-mode","onClick"];function be(e,i,w,h,z,P){const s=N("var-icon"),m=N("var-input"),c=N("var-cell"),C=N("var-menu"),o=ne("ripple");return d(),f("ul",{class:v(e.n())},[I((d(),f("li",{class:v(e.classes(e.n("item"),e.n("prev"),[e.current<=1||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--hover"),"var-elevation--2"])),onClick:i[0]||(i[0]=l=>e.clickItem("prev"))},[O(e.$slots,"prev",{},()=>[y(s,{name:"chevron-left"})])],2)),[[o,{disabled:e.current<=1||e.disabled}]]),e.simple?(d(),f("li",{key:0,class:v(e.classes(e.n("simple"),[e.disabled,e.n("item--disabled")]))},[y(m,{modelValue:e.simpleValue,"onUpdate:modelValue":i[1]||(i[1]=l=>e.simpleValue=l),disabled:e.disabled,"var-pagination-cover":"",onBlur:i[2]||(i[2]=l=>e.setPage("simple",e.simpleValue,l)),onKeydown:i[3]||(i[3]=Q(l=>e.setPage("simple",e.simpleValue,l),["enter"]))},null,8,["modelValue","disabled"]),U("span",null,"/ "+b(e.pageCount),1)],2)):(d(!0),f(R,{key:1},j(e.pageList,(l,g)=>I((d(),f("li",{key:e.toNumber(l)+g,"item-mode":e.getMode(l,g),class:v(e.classes(e.n("item"),"var-elevation--2",[l===e.current&&!e.disabled,e.n("item--active")],[e.isHideEllipsis(l,g),e.n("item--hide")],[e.disabled,e.n("item--disabled")],[l===e.current&&e.disabled,e.n("item--disabled--active")])),onClick:B=>e.clickItem(l,g)},[E(b(l),1)],10,fe)),[[o,{disabled:e.disabled}]])),128)),I((d(),f("li",{class:v(e.classes(e.n("item"),e.n("next"),[e.current>=e.pageCount||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--hover"),"var-elevation--2"])),onClick:i[4]||(i[4]=l=>e.clickItem("next"))},[O(e.$slots,"next",{},()=>[y(s,{name:"chevron-right"})])],2)),[[o,{disabled:e.current>=e.pageCount||e.disabled}]]),e.showSizeChanger?(d(),f("li",{key:2,class:v(e.classes(e.n("size"),[e.disabled,e.n("item--disabled")]))},[y(C,{show:e.menuVisible,"onUpdate:show":i[6]||(i[6]=l=>e.menuVisible=l),"offset-x":-4},{menu:F(()=>[(d(!0),f(R,null,j(e.sizeOption,(l,g)=>I((d(),oe(c,{class:v(e.classes(e.n("list"),[e.size===l,e.n("list--active")])),key:g,onClick:B=>e.clickSize(l)},{default:F(()=>[E(b(l)+b(e.pack.paginationItem)+" / "+b(e.pack.paginationPage),1)]),_:2},1032,["class","onClick"])),[[o]])),128))]),default:F(()=>[U("div",{class:v(e.classes(e.n("size--open"),[e.current<=1||e.disabled,e.n("size--open--disabled")])),onClick:i[5]||(i[5]=(...l)=>e.showMenu&&e.showMenu(...l))},[U("span",null,b(e.size)+b(e.pack.paginationItem)+" / "+b(e.pack.paginationPage),1),y(s,{class:v(e.n("size--open-icon")),"var-pagination-cover":"",name:"menu-down"},null,8,["class"])],2)]),_:1},8,["show"])],2)):H("v-if",!0),e.showQuickJumper&&!e.simple?(d(),f("li",{key:3,class:v(e.classes(e.n("quickly"),[e.disabled,"item--disabled"]))},[E(b(e.pack.paginationJump)+" ",1),y(m,{modelValue:e.inputValue,"onUpdate:modelValue":i[7]||(i[7]=l=>e.inputValue=l),disabled:e.disabled,"var-pagination-cover":"",onBlur:i[8]||(i[8]=l=>e.setPage("quick",e.inputValue,l)),onKeydown:i[9]||(i[9]=Q(l=>e.setPage("quick",e.inputValue,l),["enter"]))},null,8,["modelValue","disabled"])],2)):H("v-if",!0),e.totalText?(d(),f("li",{key:4,class:v(e.n("total"))},b(e.totalText),3)):H("v-if",!0)],2)}var Me=re(pe,[["render",be]]);export{Me as P};
