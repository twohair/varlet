var ne=Object.defineProperty;var R=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var X=(e,s,r)=>s in e?ne(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,J=(e,s)=>{for(var r in s||(s={}))re.call(s,r)&&X(e,r,s[r]);if(R)for(var r of R(s))ue.call(s,r)&&X(e,r,s[r]);return e};import{d as se,a as g,t as S,c as oe,s as d,i as ie}from"./components.27c76418.js";import{F as de,u as ce}from"./provide.63ba3e6d.js";import{m as K,a as me}from"./elements.f685cff6.js";import{d as ve,a as w,r as he,b as p,w as j,e as be,_ as fe,t as Ve,h as F,i as L,p as m,H as o,K as V,F as ge,ad as Se,J as ye,x as ze,n as pe,N as ke}from"./elevation.ecb899cd.js";function Ce(e){return["always","normal","never"].includes(e)}const Te={modelValue:{type:[Number,Array],default:0},step:{type:[Number,String],default:1},range:{type:Boolean,default:!1},labelVisible:{type:String,default:"normal",validator:Ce},activeColor:{type:String},trackColor:{type:String},thumbColor:{type:String},labelColor:{type:String},labelTextColor:{type:String},trackHeight:{type:[String,Number]},thumbSize:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},onChange:{type:Function},onStart:{type:Function},onEnd:{type:Function},"onUpdate:modelValue":{type:Function}};const{n:Ne,classes:we}=oe("slider");var q=(e=>(e.First="1",e.Second="2",e))(q||{});const Fe=ve({name:"VarSlider",components:{VarFormDetails:de},props:Te,setup(e){const{bindForm:s,form:r}=ce(),{errorMessage:P,validateWithTrigger:U,validate:D,resetValidation:k}=se(),u=()=>D(e.rules,e.modelValue),c=()=>({startPosition:0,currentLeft:0,active:!1,percentValue:0}),G=()=>pe(()=>U(["onChange"],"onChange",e.rules,e.modelValue)),N=w(null),v=w(0),C=w(!1),n=he({["1"]:c(),["2"]:c()}),h=p(()=>v.value/100*S(e.step)),O=p(()=>{let l=[{value:e.modelValue,enumValue:"1"}];return e.range&&d(e.modelValue)&&(l=[{value:e.modelValue[0],enumValue:"1"},{value:e.modelValue[1],enumValue:"2"}]),l}),Q=l=>{let a;return e.thumbSize!==void 0&&(a=n[l.enumValue].active?K(e.thumbSize,3):"0px"),{height:a,width:a}},Y=l=>e.labelVisible==="always"?!0:e.labelVisible==="never"?!1:n[l].active,Z=p(()=>{const{activeColor:l,range:a,modelValue:t}=e,b=a&&d(t)?Math.abs(t[0]-t[1]):t,i=a&&d(t)?Math.min(t[0],t[1]):0;return{width:`${b}%`,left:`${i}%`,background:l}}),y=p(()=>e.disabled||(r==null?void 0:r.disabled.value)),T=p(()=>e.readonly||(r==null?void 0:r.readonly.value)),M=(l,a)=>{let t=[];const{step:b,range:i,modelValue:f,onChange:ae}=e,H=S(b),z=Math.round(l/h.value)*H,te=n[a].percentValue;if(n[a].percentValue=z/H,i&&d(f)&&(t=a==="1"?[z,f[1]]:[f[0],z]),te!==z){const I=i?t:z;g(ae,I),g(e["onUpdate:modelValue"],I),G()}},_=l=>{if(!e.range)return"1";const a=n["1"].percentValue*h.value,t=n["2"].percentValue*h.value,b=Math.abs(l-a),i=Math.abs(l-t);return b<=i?"1":"2"},x=(l,a)=>{v.value||(v.value=N.value.offsetWidth),!(y.value||T.value)&&(g(e.onStart),C.value=!0,n[a].startPosition=l.touches[0].clientX)},ee=(l,a)=>{if(y.value||T.value||!C.value)return;let t=l.touches[0].clientX-n[a].startPosition+n[a].currentLeft;n[a].active=!0,t<=0?t=0:t>=v.value&&(t=v.value),M(t,a)},B=l=>{const{range:a,modelValue:t,onEnd:b}=e;if(y.value||T.value)return;let i=[];n[l].currentLeft=n[l].percentValue*h.value,n[l].active=!1;const f=n[l].percentValue;a&&d(t)&&(i=l==="1"?[f,t[1]]:[t[0],f]),g(b,a?i:f),C.value=!1},le=l=>{if(y.value||T.value||l.target.closest(".var-slider__thumb"))return;const a=l.clientX-me(l.currentTarget),t=_(a);M(a,t),B(t)},W=()=>{const l=S(e.step);return isNaN(l)?(console.warn('[Varlet] Slider: type of prop "step" should be Number'),!1):l<1||l>100?(console.warn('[Varlet] Slider: "step" should be >= 0 and <= 100'),!1):parseInt(`${e.step}`,10)!==l?(console.warn('[Varlet] Slider: "step" should be an Integer'),!1):!0},E=()=>{const{range:l,modelValue:a}=e;return l&&!d(a)?(console.error('[Varlet] Slider: "modelValue" should be an Array'),!1):!l&&d(a)?(console.error('[Varlet] Slider: "modelValue" should be a Number'),!1):l&&d(a)&&a.length<2?(console.error('[Varlet] Slider: "modelValue" should have two value'),!1):!0},A=(l=e.modelValue,a=S(e.step))=>{e.range&&d(l)?(n["1"].percentValue=l[0]/a,n["1"].currentLeft=n["1"].percentValue*h.value,n["2"].percentValue=l[1]/a,n["2"].currentLeft=n["2"].percentValue*h.value):ie(l)&&(n["1"].currentLeft=l/a*h.value)};return j([()=>e.modelValue,()=>e.step],([l,a])=>{!W()||!E()||C.value||A(l,S(a))}),j(v,()=>A()),be(()=>{!W()||!E()||(v.value=N.value.offsetWidth)}),g(s,{reset:()=>{const l=e.range?[0,0]:0;g(e["onUpdate:modelValue"],l),k()},validate:u,resetValidation:k}),{n:Ne,classes:we,Thumbs:q,sliderEl:N,getFillStyle:Z,isDisabled:y,errorMessage:P,thumbsProps:n,thumbList:O,multiplySizeUnit:K,toNumber:S,getRippleSize:Q,showLabel:Y,start:x,move:ee,end:B,click:le}}}),Le=["onTouchstart","onTouchmove","onTouchend","onTouchcancel"];function $e(e,s,r,P,U,D){const k=Ve("var-form-details");return F(),L("div",{class:o(e.n())},[m("div",{class:o(e.classes(e.n("block"),[e.isDisabled,e.n("--disabled")],[e.errorMessage,e.n("--error")])),style:V({height:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,3),margin:e.thumbSize===void 0?e.thumbSize:`0 ${e.multiplySizeUnit(e.thumbSize,.5)}`}),ref:"sliderEl",onClick:s[0]||(s[0]=(...u)=>e.click&&e.click(...u))},[m("div",{class:o(e.n("track"))},[m("div",{class:o(e.n("track-background")),style:V({background:e.trackColor,height:e.multiplySizeUnit(e.trackHeight)})},null,6),m("div",{class:o(e.n("track-fill")),style:V(e.getFillStyle)},null,6)],2),(F(!0),L(ge,null,Se(e.thumbList,u=>(F(),L("div",{class:o(e.n("thumb")),key:u.enumValue,style:V({left:`${u.value}%`,zIndex:e.thumbsProps[u.enumValue].active?1:void 0}),onTouchstart:c=>e.start(c,u.enumValue),onTouchmove:c=>e.move(c,u.enumValue),onTouchend:c=>e.end(u.enumValue),onTouchcancel:c=>e.end(u.enumValue)},[ye(e.$slots,"button",{currentValue:u.value},()=>[m("div",{class:o(e.n("thumb-block")),style:V({background:e.thumbColor,height:e.multiplySizeUnit(e.thumbSize),width:e.multiplySizeUnit(e.thumbSize)})},null,6),m("div",{class:o(e.classes(e.n("thumb-ripple"),[e.thumbsProps[u.enumValue].active,e.n("thumb-ripple--active")])),style:V(J({background:e.thumbColor},e.getRippleSize(u)))},null,6),m("div",{class:o(e.classes(e.n("thumb-label"),[e.showLabel(u.enumValue),e.n("thumb-label--active")])),style:V({background:e.labelColor,color:e.labelTextColor,height:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2),width:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2)})},[m("span",null,ke(u.value),1)],6)])],46,Le))),128))],6),ze(k,{"error-message":e.errorMessage,class:o(e.n("form")),"var-slider-cover":""},null,8,["error-message","class"])],2)}var $=fe(Fe,[["render",$e]]);$.install=function(e){e.component($.name,$)};export{$ as S};
