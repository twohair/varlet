import{S as se}from"./index.5cbdfc6a.js";import{d as H,a as r,b as _,P as te,_ as V,o as p,e as X,O as b,E as U,H as F,K as T,M as u,m as ae,am as oe,w as le,i as K,ap as re,f as C,F as Y,ac as j,G as w,J as P,af as m,p as D}from"./elevation.ded31914.js";import{j as ie,l as ce,h as de,m as ue,c as q,a as O,t as L,w as fe,n as ve}from"./components.be4fa7b1.js";import{i as M,c as pe,f as he,d as me,e as ye,n as _e,r as be}from"./elements.e37f6779.js";import{C as R}from"./index.b9d598c3.js";import{d as Ce}from"./index.5d153c96.js";import{u as ke,a as G,_ as ge,b as Ie,c as Te}from"./en-US.66474835.js";import{a as xe,b as Ne}from"./utils.87a56bd1.js";import"./index.ad9dd901.js";const J=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),Q=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function Be(){const{bindChildren:e,childProviders:l}=ie(J),{length:s}=ce(Q);return{length:s,indexAnchors:l,bindIndexAnchors:e}}function Ae(){const{parentProvider:e,bindParent:l}=de(J),{index:s}=ue(Q);if(!e||!l)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:s,indexBar:e,bindIndexBar:l}}const Ee={index:{type:[Number,String]}};const{n:$e,classes:Se}=q("index-anchor"),we=H({name:"VarIndexAnchor",components:{VarSticky:se},inheritAttrs:!1,props:Ee,setup(e){const{index:l,indexBar:s,bindIndexBar:d}=Ae(),i=r(0),n=r(!1),o=_(()=>e.index),a=r(null),{active:f,sticky:N,cssMode:B,stickyOffsetTop:y,zIndex:k}=s;return d({index:l,name:o,ownTop:i,setOwnTop:()=>{!a.value||(i.value=a.value.$el?a.value.$el.offsetTop:a.value.offsetTop)},setDisabled:g=>{n.value=g}}),{n:$e,classes:Se,name:o,anchorEl:a,active:f,sticky:N,zIndex:k,disabled:n,cssMode:B,stickyOffsetTop:y,Transition:te}}});function De(e,l,s,d,i,n){return p(),X(oe(e.sticky?"var-sticky":e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:b(()=>[U("div",ae({class:e.n()},e.$attrs),[F(e.$slots,"default",{},()=>[T(u(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}var Oe=V(we,[["render",De]]);const ze={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:{type:Function},onChange:{type:Function}};const{n:Pe,classes:Le}=q("index-bar"),Me=H({name:"VarIndexBar",props:ze,setup(e){const{length:l,indexAnchors:s,bindIndexAnchors:d}=Be(),i=r(""),n=r(null),o=r(null),a=r([]),f=r(),N=_(()=>e.sticky),B=_(()=>e.cssMode),y=_(()=>e.stickyOffsetTop),k=_(()=>e.zIndex);d({active:f,sticky:N,cssMode:B,stickyOffsetTop:y,zIndex:k});const A=t=>{const c=ve(t)?t.name.value:t;c===f.value||c===void 0||(f.value=c,O(e.onChange,c))},E=()=>{const t=he(n.value),c=n.value===window?document.body.scrollHeight:n.value.scrollHeight,{offsetTop:$}=o.value;s.forEach((v,h)=>{const S=v.ownTop.value,I=t-S+y.value-$,ne=h===s.length-1?c:s[h+1].ownTop.value-v.ownTop.value;I>=0&&I<ne&&!i.value&&(h&&!e.cssMode&&s[h-1].setDisabled(!0),v.setDisabled(!1),A(v))})},g=async(t,c)=>{const{offsetTop:$}=o.value;if(c&&O(e.onClick,t),t===f.value)return;const v=s.find(({name:I})=>t===I.value);if(!v)return;const h=v.ownTop.value-y.value+$,S=me(n.value);i.value=t,A(t),await ye(n.value,{left:S,top:h,animation:fe,duration:L(e.duration)}),_e(()=>{i.value=""})},ee=t=>{be(()=>g(t,!0))};return le(()=>l.value,async()=>{await M(),s.forEach(({name:t,setOwnTop:c})=>{t.value&&a.value.push(t.value),c()})}),K(async()=>{await M(),n.value=pe(o.value),n.value.addEventListener("scroll",E)}),re(()=>{O(n.value.removeEventListener,"scroll",E)}),{n:Pe,classes:Le,barEl:o,active:f,zIndex:k,anchorNameList:a,toNumber:L,scrollTo:ee,anchorClick:g}}}),Re=["onClick"];function He(e,l,s,d,i,n){return p(),C("div",{class:w(e.n()),ref:"barEl"},[F(e.$slots,"default"),U("ul",{class:w(e.n("anchor-list")),style:P({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(p(!0),C(Y,null,j(e.anchorNameList,o=>(p(),C("li",{key:o,class:w(e.classes(e.n("anchor-item"),[e.active===o,e.n("anchor-item--active")])),style:P({color:e.active===o&&e.highlightColor?e.highlightColor:""}),onClick:a=>e.anchorClick(o)},u(o),15,Re))),128))],6)],2)}var x=V(Me,[["render",He]]);x.install=function(e){e.component(x.name,x)};var Ve={title:"\u6807\u9898",text:"\u6587\u672C"},Xe={title:"Title",text:"Text"};const{add:W,use:Ue,pack:z,packs:en,merge:nn}=ke(),Fe=e=>{Te(e),Ue(e)};G("zh-CN",ge);G("en-US",Ie);W("zh-CN",Ve);W("en-US",Xe);const sn={setup(e){const l=r([]),s=r("#e7edf7"),d=r("#2e67ba");K(()=>{for(let n=0;n<26;n++)l.value.push(String.fromCharCode(65+n))});const i=n=>{console.log(n)};return xe(Fe),Ne(Ce,n=>{s.value=n==="darkThemes"?"rgb(41, 42, 45)":"#e7edf7",d.value=n==="darkThemes"?"#3980e8":"#2e67ba"}),(n,o)=>(p(),X(m(x),{onChange:i,duration:"300","sticky-offset-top":54},{default:b(()=>[(p(!0),C(Y,null,j(l.value,a=>(p(),C("div",{key:a},[D(Oe,{index:a,class:"var-index-anchor__example",style:P({background:s.value,color:d.value})},{default:b(()=>[T(u(m(z).title)+" "+u(a),1)]),_:2},1032,["index","style"]),D(m(R),null,{default:b(()=>[T(u(a)+" "+u(m(z).text),1)]),_:2},1024),D(m(R),null,{default:b(()=>[T(u(a)+" "+u(m(z).text),1)]),_:2},1024)]))),128))]),_:1}))}};export{sn as default};
