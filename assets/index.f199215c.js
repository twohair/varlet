import{F as H,u as J}from"./provide.b10968b0.js";import{I as K}from"./index.ec6cb9aa.js";import{y as O,e as d,B as h,c as q}from"./components.69d5bae5.js";import{d as G,a as F,B as L,b as Q,o as X,_ as Y,s as T,f as u,h as y,l as t,H as r,J as N,k as B,K as p,N as Z,t as x,n as _,i as ee}from"./elevation.e55d3ca3.js";function le(e){return["text","password","number"].includes(e)}const ne={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:le},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onInput:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const{n:k,classes:ae}=q("input"),oe=G({name:"VarInput",components:{VarIcon:K,VarFormDetails:H},props:ne,setup(e){const n=F(`var-input-${L().uid}`),g=F(null),m=F(!1),I=Q(()=>{const{maxlength:l,modelValue:o}=e;return l?h(o)?`0 / ${l}`:`${String(o).length}/${l}`:""}),{bindForm:M,form:s}=J(),{errorMessage:v,validateWithTrigger:a,validate:z,resetValidation:b}=O(),i=l=>{_(()=>{const{validateTrigger:o,rules:f,modelValue:C}=e;a(o,l,f,C)})},P=()=>{const{hint:l,modelValue:o}=e;if(!l&&!h(o))return k("--placeholder-hidden");if(l&&(!h(o)||m.value))return k("--placeholder-hint")},U=l=>{m.value=!0,d(e.onFocus,l),i("onFocus")},c=l=>{m.value=!1,d(e.onBlur,l),i("onBlur")},E=l=>{let{value:o}=l.target;o=S(o),d(e["onUpdate:modelValue"],o),d(e.onInput,o,l),i("onInput")},R=l=>{const{value:o}=l.target;d(e.onChange,S(o),l),i("onChange")},A=()=>{const{disabled:l,readonly:o,clearable:f,onClear:C}=e;(s==null?void 0:s.disabled.value)||(s==null?void 0:s.readonly.value)||l||o||!f||(d(e["onUpdate:modelValue"],""),d(C,""),i("onClear"))},W=l=>{const{disabled:o,onClick:f}=e;(s==null?void 0:s.disabled.value)||o||(d(f,l),i("onClick"))},S=l=>e.modelModifiers.trim?l.trim():l,w=()=>{d(e["onUpdate:modelValue"],""),b()},D=()=>z(e.rules,e.modelValue),$=()=>{var l;(l=g.value)==null||l.focus()},j=()=>{g.value.blur()};return d(M,{reset:w,validate:D,resetValidation:b}),X(()=>{e.autofocus&&$()}),{el:g,id:n,isFocus:m,errorMessage:v,maxlengthText:I,formDisabled:s==null?void 0:s.disabled,formReadonly:s==null?void 0:s.readonly,n:k,classes:ae,isEmpty:h,computePlaceholderState:P,handleFocus:U,handleBlur:c,handleInput:E,handleChange:R,handleClear:A,handleClick:W,validate:D,resetValidation:b,reset:w,focus:$,blur:j}}}),se=["id","disabled","type","value","maxlength","rows"],re=["id","disabled","type","value","maxlength"],de=["for"];function ie(e,n,g,m,I,M){const s=T("var-icon"),v=T("var-form-details");return u(),y("div",{class:r(e.classes(e.n(),"var--box",[e.disabled,e.n("--disabled")])),onClick:n[8]||(n[8]=(...a)=>e.handleClick&&e.handleClick(...a))},[t("div",{class:r(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[t("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[N(e.$slots,"prepend-icon")],2),t("div",{class:r(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(u(),y("input",{key:0,class:r(e.n("autocomplete"))},null,2)):B("v-if",!0),e.textarea?(u(),y("textarea",{key:1,class:r(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:p({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:n[0]||(n[0]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:n[1]||(n[1]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:n[2]||(n[2]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:n[3]||(n[3]=(...a)=>e.handleChange&&e.handleChange(...a))},`
        `,46,se)):(u(),y("input",{key:2,class:r(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:p({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:n[4]||(n[4]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:n[5]||(n[5]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:n[6]||(n[6]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:n[7]||(n[7]=(...a)=>e.handleChange&&e.handleChange(...a))},null,46,re)),t("label",{class:r(e.classes("var--ellipsis",[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},Z(e.placeholder),15,de)],2),t("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[N(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(u(),ee(s,{key:0,class:r(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):B("v-if",!0)])],2)],6),e.line?(u(),y("div",{key:0,class:r(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.blurColor})},[t("div",{class:r(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):B("v-if",!0),x(v,{"error-message":e.errorMessage,"maxlength-text":e.maxlengthText},null,8,["error-message","maxlength-text"])],2)}var V=Y(oe,[["render",ie]]);V.install=function(e){e.component(V.name,V)};export{V as I};
